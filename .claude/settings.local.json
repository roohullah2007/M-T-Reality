{
  "permissions": {
    "allow": [
      "Bash(composer create-project:*)",
      "Bash(mv:*)",
      "Bash(nul)",
      "Bash(rmdir:*)",
      "Bash(composer require:*)",
      "Bash(php artisan:*)",
      "Bash(npm install:*)",
      "Bash(git remote add:*)",
      "Bash(cat:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(if not exist \"F:\\OKByOwner\\resources\\js\\Pages\\Admin\\Inquiries\" mkdir \"F:\\OKByOwner\\resources\\js\\Pages\\Admin\\Inquiries\")",
      "Bash(if not exist \"F:\\OKByOwner\\resources\\js\\Pages\\Admin\\Messages\" mkdir \"F:\\OKByOwner\\resources\\js\\Pages\\Admin\\Messages\")",
      "Bash(dir:*)",
      "WebFetch(domain:flowphotos.com)",
      "WebFetch(domain:ffmlsok.com)",
      "WebFetch(domain:www.ffmlsok.com)",
      "WebSearch",
      "Bash(npm run build:*)",
      "WebFetch(domain:okby.wpbun.xyz)",
      "Bash(if not exist \"F:\\OKByOwner\\storage\\app\\public\\properties\" mkdir \"F:\\OKByOwner\\storage\\app\\public\\properties\")",
      "Bash(php -r:*)",
      "Bash(del \"F:\\\\OKByOwner\\\\resources\\\\js\\\\Pages\\\\Admin\\\\Properties\\\\Edit.jsx\")",
      "Bash(cmd /c \"del F:\\\\OKByOwner\\\\resources\\\\js\\\\Pages\\\\Admin\\\\Properties\\\\Edit.jsx\")",
      "WebFetch(domain:tandmmortgages.morty.com)",
      "Bash(php:*)",
      "Bash(findstr:*)",
      "WebFetch(domain:dev.okbyowner.com)",
      "WebFetch(domain:tours.flowphotos.com)",
      "Bash(if not exist \"F:\\\\OKByOwner\\\\resources\\\\js\\\\Pages\\\\Admin\\\\MediaOrders\" mkdir \"F:\\\\OKByOwner\\\\resources\\\\js\\\\Pages\\\\Admin\\\\MediaOrders\")",
      "Bash(net start MySQL)",
      "Bash(sc query:*)",
      "WebFetch(domain:flowphotosokc.com)",
      "WebFetch(domain:www.pexels.com)",
      "Bash(curl:*)",
      "Bash(if [ -f storage/logs/laravel.log ])",
      "Bash(then tail -50 storage/logs/laravel.log)",
      "Bash(else echo \"No recent errors in log\")",
      "Bash(fi)",
      "mcp__ide__getDiagnostics",
      "Bash(ls:*)",
      "Bash(git checkout:*)",
      "Bash(git fetch:*)",
      "Bash(gh run list:*)",
      "Bash(git branch:*)",
      "Bash(git rm:*)",
      "Bash(grep:*)",
      "Bash(for file in \"app/Http/Controllers/Auth/RegisteredUserController.php\" \"app/Http/Controllers/Auth/GoogleController.php\" \"app/Http/Controllers/UserDashboardController.php\" \"app/Http/Controllers/PropertyController.php\" \"app/Models/User.php\" \"app/Models/Property.php\" \"app/Mail/EmailVerificationCode.php\")",
      "Bash(do echo \"Checking: $file\")",
      "Bash(done)",
      "Bash(tree:*)",
      "Bash(del add_coordinates.php)",
      "Bash(sshpass -p 'Okbyowner@2024' ssh -o StrictHostKeyChecking=no root@168.231.64.74 \"echo ''Connected successfully''\")",
      "Bash(ssh:*)",
      "Bash(del F:OKByOwnertest_school_district.php)",
      "Bash(powershell -Command \"Set-Content -Path ''test_validation.php'' -Value @''\n<?php\nrequire \"\"vendor/autoload.php\"\";\n$app = require_once \"\"bootstrap/app.php\"\";\n$app->make\\(\"\"Illuminate\\\\Contracts\\\\Console\\\\Kernel\"\"\\)->bootstrap\\(\\);\n\nuse Illuminate\\\\Support\\\\Facades\\\\Validator;\n\n$rules = [\n    \"\"schoolDistrict\"\" => \"\"required|string|max:255\"\",\n    \"\"gradeSchool\"\" => \"\"nullable|string|max:255\"\",\n    \"\"middleSchool\"\" => \"\"nullable|string|max:255\"\",\n    \"\"highSchool\"\" => \"\"nullable|string|max:255\"\",\n    \"\"acres\"\" => \"\"nullable|numeric|min:0\"\",\n    \"\"zoning\"\" => \"\"nullable|string|max:100\"\",\n];\n\n// Test with missing schoolDistrict\n$data1 = [\"\"gradeSchool\"\" => \"\"Test Elementary\"\"];\n$validator1 = Validator::make\\($data1, $rules\\);\necho \"\"Missing schoolDistrict fails validation: \"\" . \\($validator1->fails\\(\\) ? \"\"YES\"\" : \"\"NO\"\"\\) . PHP_EOL;\n\n// Test with valid data\n$data2 = [\"\"schoolDistrict\"\" => \"\"Test District\"\", \"\"acres\"\" => 5.5];\n$validator2 = Validator::make\\($data2, $rules\\);\necho \"\"Valid data passes validation: \"\" . \\(!$validator2->fails\\(\\) ? \"\"YES\"\" : \"\"NO\"\"\\) . PHP_EOL;\n\n// Test acres numeric validation\n$data3 = [\"\"schoolDistrict\"\" => \"\"Test\"\", \"\"acres\"\" => \"\"not-a-number\"\"];\n$validator3 = Validator::make\\($data3, $rules\\);\necho \"\"Non-numeric acres fails validation: \"\" . \\($validator3->fails\\(\\) ? \"\"YES\"\" : \"\"NO\"\"\\) . PHP_EOL;\n\necho PHP_EOL . \"\"Validation rules working correctly!\"\" . PHP_EOL;\n''@\")",
      "Bash(timeout:*)",
      "WebFetch(domain:127.0.0.1)",
      "Bash(sshpass -p 'Okbyowner@2024' ssh -o StrictHostKeyChecking=no root@168.231.64.74 \"cd /var/www/okbyowner && git pull origin main\")",
      "Bash(where:*)",
      "Bash(if not exist \"F:\\\\OKByOwner\\\\resources\\\\js\\\\Pages\\\\Admin\\\\CompanyLogos\" mkdir \"F:\\\\OKByOwner\\\\resources\\\\js\\\\Pages\\\\Admin\\\\CompanyLogos\")",
      "Bash(ren:*)",
      "Bash(npx --yes acorn:*)",
      "Bash(npx vite build:*)",
      "Bash(powershell -Command \"Get-Content ''F:\\\\OKByOwner\\\\routes\\\\web.php'' | Select-String \"\"Route::get\\\\\\(.*''\\\\/\"\" | Select-Object Line -First 30\")",
      "Bash(powershell -Command:*)",
      "Bash(\"F:/OKByOwner/test_import.csv\" << 'CSVEOF'\nowner_name,owner_address,owner_phone,owner_email,address,city,state,zip_code,price,bedrooms,bathrooms,sqft,property_type,lot_size,description\nJohn Smith,123 Main St Oklahoma City OK 73101,405-555-1234,john@test.com,456 Oak Ave,Oklahoma City,Oklahoma,73102,250000,3,2,1800,single_family,,Beautiful home\nJane Doe,789 Pine Rd Tulsa OK 74101,918-555-5678,jane@test.com,101 Elm St,Tulsa,Oklahoma,74103,185000,2,1,1200,townhouse,,Nice townhouse\n,,,No Owner Info,202 Birch Ln,Norman,Oklahoma,73019,320000,4,3,2400,single_family,,Spacious property\nBad Row,No Address,,bad@test.com,,,,,,,,,,\nCSVEOF)",
      "Bash(\"F:\\\\OKByOwner\\\\test_zillow_service.php\" << 'PHPEOF'\n<?php\nrequire __DIR__ . '/vendor/autoload.php';\n$app = require_once __DIR__ . '/bootstrap/app.php';\n$app->make\\('Illuminate\\\\Contracts\\\\Console\\\\Kernel'\\)->bootstrap\\(\\);\n\nuse App\\\\Services\\\\ZillowApiService;\n\n$service = new ZillowApiService\\(\\);\n\necho \"API Configured: \" . \\($service->isConfigured\\(\\) ? 'YES' : 'NO'\\) . \"\\\\n\";\n\nif \\(!$service->isConfigured\\(\\)\\) {\n    echo \"FAIL: Zillow API not configured\\\\n\";\n    exit\\(1\\);\n}\n\n// Test with a known working URL \\(New York\\)\n$testUrl = 'https://www.zillow.com/new-york-ny/?searchQueryState=%7B%22isMapVisible%22%3Atrue%2C%22mapBounds%22%3A%7B%22north%22%3A40.99288801644816%2C%22south%22%3A40.4015026337193%2C%22east%22%3A-73.4399776308594%2C%22west%22%3A-74.51938436914065%7D%2C%22filterState%22%3A%7B%22sort%22%3A%7B%22value%22%3A%22globalrelevanceex%22%7D%7D%2C%22isListVisible%22%3Atrue%2C%22usersSearchTerm%22%3A%22New%20York%2C%20NY%22%2C%22regionSelection%22%3A%5B%7B%22regionId%22%3A6181%2C%22regionType%22%3A6%7D%5D%7D';\n\necho \"\\\\nSearching Zillow via API...\\\\n\";\n$result = $service->searchByUrl\\($testUrl\\);\n\nif \\($result['success']\\) {\n    echo \"SUCCESS! Found \" . $result['totalCount'] . \" total listings\\\\n\";\n    echo \"Results on this page: \" . count\\($result['results']\\) . \"\\\\n\";\n    \n    if \\(count\\($result['results']\\) > 0\\) {\n        $first = $result['results'][0];\n        echo \"\\\\nFirst result:\\\\n\";\n        echo \"  Address: \" . $first['address'] . \"\\\\n\";\n        echo \"  City: \" . $first['city'] . \"\\\\n\";\n        echo \"  State: \" . $first['state'] . \"\\\\n\";\n        echo \"  Price: $\" . number_format\\($first['price']\\) . \"\\\\n\";\n        echo \"  Beds: \" . $first['bedrooms'] . \"\\\\n\";\n        echo \"  Baths: \" . $first['bathrooms'] . \"\\\\n\";\n        echo \"  Sqft: \" . $first['sqft'] . \"\\\\n\";\n        echo \"  Type: \" . $first['property_type'] . \"\\\\n\";\n        echo \"  Lat/Lng: \" . \\($first['latitude'] ?? 'N/A'\\) . \"/\" . \\($first['longitude'] ?? 'N/A'\\) . \"\\\\n\";\n    }\n    \n    echo \"\\\\nZillow API Service: PASS\\\\n\";\n} else {\n    echo \"FAIL: \" . $result['error'] . \"\\\\n\";\n}\nPHPEOF)",
      "Bash(cmd /c type \"F:\\\\OKByOwner\\\\app\\\\Services\\\\ClaimLetterService.php\")",
      "Bash(cmd /c dir \"F:\\\\OKByOwner\\\\resources\\\\views\\\\pdf\")",
      "Bash(\"F:/OKByOwner/test_pdf.php\" << 'SCRIPT'\n<?php\nrequire __DIR__ . '/vendor/autoload.php';\n$app = require_once __DIR__ . '/bootstrap/app.php';\n$app->make\\('Illuminate\\\\Contracts\\\\Console\\\\Kernel'\\)->bootstrap\\(\\);\n\nuse App\\\\Services\\\\ClaimLetterService;\nuse App\\\\Models\\\\Property;\n\n// Check if ClaimLetterService exists and can be instantiated\ntry {\n    $service = new ClaimLetterService\\(\\);\n    echo \"ClaimLetterService: instantiated OK\\\\n\";\n} catch \\(\\\\Exception $e\\) {\n    echo \"FAIL: \" . $e->getMessage\\(\\) . \"\\\\n\";\n    exit\\(1\\);\n}\n\n// Check if the blade templates exist\n$letterTemplate = resource_path\\('views/pdf/claim-letter.blade.php'\\);\n$batchTemplate = resource_path\\('views/pdf/claim-letter-batch.blade.php'\\);\n\necho \"claim-letter.blade.php exists: \" . \\(file_exists\\($letterTemplate\\) ? 'YES' : 'NO'\\) . \"\\\\n\";\necho \"claim-letter-batch.blade.php exists: \" . \\(file_exists\\($batchTemplate\\) ? 'YES' : 'NO'\\) . \"\\\\n\";\n\n// Check dompdf is installed\necho \"DomPDF available: \" . \\(class_exists\\('Barryvdh\\\\DomPDF\\\\Facade\\\\Pdf'\\) ? 'YES' : 'NO'\\) . \"\\\\n\";\n\n// Check QR code library is available\necho \"QRCode available: \" . \\(class_exists\\('chillerlan\\\\QRCode\\\\QRCode'\\) ? 'YES' : 'NO'\\) . \"\\\\n\";\n\n// Try to generate a letter for a test property \\(without saving\\)\n// Create a fake property to test rendering\n$property = new Property\\([\n    'id' => 99999,\n    'property_title' => '123 Test St, Oklahoma City',\n    'address' => '123 Test St',\n    'city' => 'Oklahoma City',\n    'state' => 'Oklahoma',\n    'zip_code' => '73102',\n    'price' => 250000,\n    'bedrooms' => 3,\n    'bathrooms' => 2,\n    'sqft' => 1800,\n    'property_type' => 'single_family',\n    'claim_token' => 'test-token-12345',\n    'claim_expires_at' => now\\(\\)->addDays\\(30\\),\n    'owner_name' => 'John Smith',\n    'owner_mailing_address' => '456 Main St, Oklahoma City, OK 73101',\n]\\);\n\ntry {\n    $pdf = $service->generateLetter\\($property\\);\n    echo \"PDF generated successfully: \" . \\(is_object\\($pdf\\) ? 'YES' : 'NO'\\) . \"\\\\n\";\n    \n    // Try outputting to a test file\n    $testPath = __DIR__ . '/test_letter.pdf';\n    file_put_contents\\($testPath, $pdf->output\\(\\)\\);\n    $fileSize = filesize\\($testPath\\);\n    echo \"PDF file size: \" . number_format\\($fileSize\\) . \" bytes\\\\n\";\n    \n    if \\($fileSize > 1000\\) {\n        echo \"\\\\nPDF Generation: PASS\\\\n\";\n    } else {\n        echo \"\\\\nPDF Generation: FAIL \\(file too small\\)\\\\n\";\n    }\n    \n    // Clean up\n    unlink\\($testPath\\);\n} catch \\(\\\\Exception $e\\) {\n    echo \"PDF generation error: \" . $e->getMessage\\(\\) . \"\\\\n\";\n    echo \"Stack trace: \" . $e->getTraceAsString\\(\\) . \"\\\\n\";\n}\nSCRIPT)",
      "Bash(del \"F:\\\\OKByOwner\\\\test_zillow_api.php\" \"F:\\\\OKByOwner\\\\test_zillow_service.php\" \"F:\\\\OKByOwner\\\\test_csv_import.php\" \"F:\\\\OKByOwner\\\\test_import.csv\" \"F:\\\\OKByOwner\\\\test_pdf.php\" \"F:\\\\OKByOwner\\\\test_models.php\")",
      "WebFetch(domain:rapidapi.com)",
      "WebFetch(domain:real-estate101.p.rapidapi.com)",
      "WebFetch(domain:apimaker.medium.com)",
      "Bash(node scripts/scrape-zillow-images.js:*)",
      "Bash(node scripts/scrape-zillow-images.cjs:*)",
      "Bash(node -c:*)",
      "Bash(git log:*)",
      "Bash(head:*)",
      "Bash(find:*)",
      "Bash(cd:*)",
      "Bash(tail:*)",
      "Bash(cd F:\\\\m and t project terry\\\\M&T-Reality:*)"
    ],
    "deny": [],
    "ask": []
  }
}
